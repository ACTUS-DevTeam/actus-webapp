factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
riskFactors
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(is.null(json$terms$marketObjectCodeOfRateReset)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json$riskFactors = riskFactors
json
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(is.null(json$terms$marketObjectCodeOfRateReset)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
file_names
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeOfRateReset)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
json$terms$nominalInterestRate
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms
json$terms$marketObjectCodeRateReset = NULL
json$terms
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
factor
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
riskFactors
file_name
file_name="demo_pam111.json"
json = fromJSON(paste0(source_path,"/",file_name))
file_name
file_name="PAM/demo_pam111.json"
json = fromJSON(paste0(source_path,"/",file_name))
json
riskFactors = list()
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor
json$terms$marketObjectCodeOfRateReset
json$terms$marketObjectCodeOfRateReset
json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeOfRateReset
json$terms
file_name="PAM/demo_pam111.json"
json = fromJSON(paste0(source_path,"/",file_name))
library(jsonlite)
library(readr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
json = fromJSON(paste0(source_path,"/",file_name))
json
!is.null(json$terms$marketObjectCodeRateReset)
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, rf_template)
}
json
json$riskFactors = riskFactors
json
json
file_name
json = fromJSON(paste0(source_path,"/",file_name))
json
riskFactors = list()
!is.null(json$terms$marketObjectCodeRateReset)
json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json
json$terms$marketObjectCodeOfRateReset
json$terms$marketObjectCodeRateReset = NULL
json
factor = rf_template
factor
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, factor)
riskFactors
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, factor)
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
json
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$terms$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$terms$statusDate, value=json$terms$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$terms$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$terms$statusDate, value=json$terms$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$terms$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$terms$statusDate, value=json$terms$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
gsub
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$terms$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$terms$statusDate, value=json$terms$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", gsub("demo_", "", unlist(strsplit(file_name,"/"))[2])))
}
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$terms$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$terms$statusDate, value=json$terms$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
riskFactors = list()
if(!is.null(json$terms$marketObjectCodeRateReset)) {
json$terms$marketObjectCodeOfRateReset = json$terms$marketObjectCodeRateReset
json$terms$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfRateReset
factor$data = list( list(time=json$terms$statusDate, value=json$terms$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$terms$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$terms$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$terms$statusDate, value=json$terms$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
json$contract = json$terms
json$terms = NULL
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
library(jsonlite)
library(readr)
#library(magrittr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
json$contract = json$terms
json$terms = NULL
riskFactors = list()
if(!is.null(json$contract$marketObjectCodeRateReset)) {
json$contract$marketObjectCodeOfRateReset = json$contract$marketObjectCodeRateReset
json$contract$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$contract$marketObjectCodeOfRateReset
factor$data = list( list(time=json$contract$statusDate, value=json$contract$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$contract$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$contract$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$contract$statusDate, value=json$contract$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
setwd("~/repos/actus/actus-webapp/data/demos")
library(jsonlite)
library(readr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
json$contract = json$terms
json$terms = NULL
json$contract$scalingIndexAtContractDealDate = json$contract$scalingIndexAtStatusDate
json$contract$scalingIndexAtStatusDate = NULL
riskFactors = list()
if(!is.null(json$contract$marketObjectCodeRateReset)) {
json$contract$marketObjectCodeOfRateReset = json$contract$marketObjectCodeRateReset
json$contract$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$contract$marketObjectCodeOfRateReset
factor$data = list( list(time=json$contract$statusDate, value=json$contract$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$contract$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$contract$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$contract$statusDate, value=json$contract$scalingIndexAtStatusDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
library(jsonlite)
library(readr)
source_path <- "./jsonOld"
save_path <- "./json"
# risk factor template
rf_template = list(marketObjectCode = "", base = 1, data = list( list(time="2015-01-01T00:00:00", value="0.4")))
# read data csv demo files
file_names <- list.files(path = source_path,recursive = TRUE)
for (file_name in file_names) {
json = fromJSON(paste0(source_path,"/",file_name))
json$contract = json$terms
json$terms = NULL
json$contract$scalingIndexAtContractDealDate = json$contract$scalingIndexAtStatusDate
json$contract$scalingIndexAtStatusDate = NULL
riskFactors = list()
if(!is.null(json$contract$marketObjectCodeRateReset)) {
json$contract$marketObjectCodeOfRateReset = json$contract$marketObjectCodeRateReset
json$contract$marketObjectCodeRateReset = NULL
factor = rf_template
factor$marketObjectCode = json$contract$marketObjectCodeOfRateReset
factor$data = list( list(time=json$contract$statusDate, value=json$contract$nominalInterestRate) )
riskFactors = c(riskFactors, list(factor))
}
if(!is.null(json$contract$marketObjectCodeOfScalingIndex)) {
factor = rf_template
factor$marketObjectCode = json$contract$marketObjectCodeOfScalingIndex
factor$data = list( list(time=json$contract$statusDate, value=json$contract$scalingIndexAtContractDealDate) )
riskFactors = c(riskFactors, list(factor))
}
json$riskFactors = riskFactors
write_lines(toJSON(json,auto_unbox=TRUE), paste0(save_path, "/", unlist(strsplit(file_name,"/"))[2]))
}
